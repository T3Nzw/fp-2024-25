# Седмица 06 - Асоциативни списъци и потоци

```scheme
(define (make-assoc f l)
  (map (lambda (x)
         (cons x (f x))) l))

(define assoc-list (make-assoc (lambda (x) (* x x)) '(1 2 3 4 5)))
```

## Задача 01 - Ключове и стойности
Напишете функция, която връща списък от всички ключове в асоциативен списък. Напишете подобно функция, но за стойностите в асоциативен списък.

### Пример:
```scheme
(keys assoc-list) ; -> '(1 2 3 4 5)
(values assoc-list) ; -> '(1 4 9 16 25)
```

## Задача 02 - Търсене в асоциативен списък
Напишете функция, приемаща ключ и асоциативен списък, която намира елементa в списъка, който има ключ равен на подадения. Ако не съществува елемент с подадения ключ, функцията да върне `#f`.

### Пример:
```scheme
(search 3 assoc-list) ; -> '(3 . 9)
(search 6 assoc-list) ; -> #f
```

## Задача 03 - Добавяне в асоциативен списък
Напишете функция, приемаща ключ, стойност и асоциатевен списък, която добавя двойката ключ-стойност в списъка, ако не съществува елемент с подадения ключ, а в противен случай променя стойността на съществуващия елемент с подадения ключ.

### Пример:
```scheme
(add-assoc 6 36 assoc-list) ; -> '((1 . 1) (2 . 4) (3 . 9) (4 . 16) (5 . 25) (6 . 36))
(add-assoc 4 36 assoc-list) ; -> '((1 . 1) (2 . 4) (3 . 9) (4 . 36) (5 . 25))
```

## Задача 04 - Хистограма
Напишете функция, която по подаден списък, връща асоциативен списък, където ключовете са елементите в списъка, а стойностите са броят пъти, в които се среща елементът в списъка.

### Пример:
```scheme
(histogram '(8 7 1 7 8 2 2 8 2 7 8 1)) ; -> '((8 . 4) (7 . 3) (1 . 2) (2 . 3))
```

```scheme
(define-syntax cons-stream
  (syntax-rules () ((cons-stream h t)
                    (cons h (delay t)))))

(define head car)
(define (tail s) (force (cdr s))) 
```

## Задача 05 - Взимане на елементи от поток
Напишете функция, която по подадено число `n` и поток, връща списък от първите `n` елемента на потока.

## Задача 06 - Естествени числа
Напишете функция, която генерира безкраен поток от всички естествени числа.

### Пример:
```scheme
(take 10 nats) ; -> '(0 1 2 3 4 5 6 7 8 9)
```

## Задача 07 - Map за потоци
Напишете функция `map-stream`, която е аналогът на `map`, но за потоци.

### Пример:
```scheme
(take 10 (map-stream (lambda (x) (* x x)) nats)) ; -> '(0 1 4 9 16 25 36 49 64 81)
```

## Задача 08 - Фибоначи
Напишете функция, която генерира безкраен поток от числата на Фибоначи

## Пример:
```scheme
(take 10 fib) ; -> '(0 1 1 2 3 5 8 13 21 34)
```

## Задача 09 - Триъгълник на Паскал
Напишете функция, която генерира безкраен поток от списъци, представляващи редовете от тригълника на Паскал.

## Пример:
```scheme 
(take 5 pascal-triangle) ; -> '((1) (1 1) (1 2 1) (1 3 3 1) (1 4 6 4 1))
```

## Задача 10* - Безкрайни суми (второ контролно 2017)
Напишете функция, която по подадени 2 положителни числа `k` и `n` генерира безкраен поток, в който първото число е `k`, а всяко следващо е сумата на предните `n` числа.

### Пример:
```scheme
(take 10 (sum-last 3 5)) ; -> '(3 3 6 12 24 48 93 183 360 708)
```
